I"€l<h1 id="builder-pattern-building-human-objects">Builder Pattern: Building human objects</h1>

<p>Let us assume a scenario where in we want to develop a system to store details of all <strong>Humans</strong> on the earth. Let us start quickly from simpler things without wasting much time in what we are going to do. Here I will be gradually creating a system similar to the marvel universe. Starting from very first entity known to all of us <strong>the human-beings</strong> on <strong>Earth</strong>. I have decided to go with python for this. I will start with very basic requirement of our trageted system and will implement it using suitable design pattern. While trying to keep the overall design clean and <strong>SOLID</strong> we may need to restructure many things as and when required. This is my attempt to explore most of the python paradigm starting from OOPs then moving towards many fascinating concepts.</p>

<blockquote>
  <p>This blog focuses on basic design pattern the Builder Pattern in python.</p>
</blockquote>

<p>Let us start from attributes of human being:</p>

<p>When we say human being we visualize some attributes. Like gender, address, physic, financial status, occupation, IQ, hobbies, education, contact number, ID, body mark, signature and so on.</p>

<p>Below is the basic Human Class which could be found in the <a href="/src/com/samples/oop/human.py">human.py</a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Human</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gender</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">physic</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">financial_status</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">occupation</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">iq</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">hobbies</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">education</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">contact_number</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">identity</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">body_mark</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">signature_scans</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">date_of_birth</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">gender</span> <span class="o">=</span> <span class="n">gender</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">physic</span> <span class="o">=</span> <span class="n">physic</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">financial_status</span> <span class="o">=</span> <span class="n">financial_status</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">occupation</span> <span class="o">=</span> <span class="n">occupation</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">iq</span> <span class="o">=</span> <span class="n">iq</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">hobbies</span> <span class="o">=</span> <span class="n">hobbies</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">education</span> <span class="o">=</span> <span class="n">education</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">contact_number</span> <span class="o">=</span> <span class="n">contact_number</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">body_mark</span> <span class="o">=</span> <span class="n">body_mark</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">identity</span> <span class="o">=</span> <span class="n">identity</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">signature_scans</span> <span class="o">=</span> <span class="n">signature_scans</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">date_of_birth</span> <span class="o">=</span> <span class="n">date_of_birth</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s">"gender ="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">gender</span>
            <span class="o">+</span> <span class="s">"physic="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">physic</span>
            <span class="o">+</span> <span class="s">"financial status="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">financial_status</span>
            <span class="o">+</span> <span class="s">"occupation ="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">occupation</span>
            <span class="o">+</span> <span class="s">"iq="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">iq</span>
            <span class="o">+</span> <span class="s">"hobbies ="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">hobbies</span>
            <span class="o">+</span> <span class="s">"education="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">education</span>
            <span class="o">+</span> <span class="s">" concat_number= "</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">contact_number</span>
            <span class="o">+</span> <span class="s">"identity= "</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">identity</span>
            <span class="o">+</span> <span class="s">"body_mark="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">body_mark</span>
            <span class="o">+</span> <span class="s">"signature_scans="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">signature_scans</span>
            <span class="o">+</span> <span class="s">"date_of_birth="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">date_of_birth</span>
            <span class="o">+</span> <span class="s">"name="</span>
            <span class="o">+</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span>
        <span class="p">)</span>
</code></pre></div></div>
<p>The above structure is a class which is a file with name human.py. After initalizing the object of this class, memory is allocated from the RAM. Whenever system wants to access this block of memory it needs its definition. For which it refers to its type which in our case is class.Let us initialize the human class.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">tony_stark</span> <span class="o">=</span> <span class="n">Human</span><span class="p">(</span><span class="n">gender</span> <span class="o">=</span><span class="s">'Male'</span><span class="p">,</span>
    <span class="n">physic</span><span class="o">=</span><span class="s">'5.4ft 100 lbs brown hair blue eyes'</span><span class="p">,</span> 
    <span class="n">financial</span> <span class="n">status</span><span class="o">=</span><span class="s">'very rich'</span><span class="p">,</span>
    <span class="n">occupation</span> <span class="o">=</span><span class="s">'scientist weapon business'</span><span class="p">,</span> 
    <span class="n">iq</span> <span class="o">=</span> <span class="s">'300'</span><span class="p">,</span> 
    <span class="n">hobbies</span> <span class="o">=</span><span class="s">'reading discovering'</span><span class="p">,</span> 
    <span class="n">education</span><span class="o">=</span> <span class="s">'phd'</span><span class="p">,</span> 
    <span class="n">concat_number</span><span class="o">=</span> <span class="s">''</span><span class="p">,</span> 
    <span class="n">Id</span><span class="o">=</span> <span class="s">'ASO4389504'</span><span class="p">,</span> 
    <span class="n">body_mark</span><span class="o">=</span><span class="s">'heat_light'</span><span class="p">,</span> 
    <span class="n">signature_scans</span><span class="o">=</span><span class="s">'eye'</span><span class="p">,</span> 
    <span class="n">date_of_birth</span><span class="o">=</span><span class="s">"may 29th, 1970"</span><span class="p">)</span>
</code></pre></div></div>

<p>In order to print the details of our object using print statement we have overwrite a str().This is also known as string representation of object. So now our class is like this. Now on printing the object we get this:
As I said earlier a memory location wherein all these values are saved is the object. So let us see how</p>

<blockquote>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>id(tony_stark)
139989539594592
</code></pre></div>  </div>
</blockquote>

<p>and whatever is stored in memory to access it our run-time environment must know what structure it is of. So our runtime libs which manages these storage must know the kind of object in order to read it appropriately. To know the type of the object</p>

<blockquote>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type(tony_stark)
&lt;class 'oop.human.Human'&gt;
</code></pre></div>  </div>
</blockquote>

<p>Now let us dig into some other details of design. As you could see assigning all values to this human class while initializing is hectic. We need to gather so many values during initialization. Let us consider an example, where we are getting individual value of 1000 humans in a loop that too 1 value at a time, then how we will initialize the object. As seen above all variables are public and we donâ€™t need getter setter thus we can access any property anywhere as shown here</p>

<blockquote>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tony_stark = Human()
tony_stark.gender = gender
</code></pre></div>  </div>
</blockquote>

<p>The flaw here is we need our property value public. What if our values are not public. Then we will either need setter getter or below is another approach.One thing we can do is save all values and then initialize the object. To avoid these situation a better solution is the builder design. This we use when there are too many properties and we are getting values few at one time and rest at other. So the builder pattern for this is given in <a href="/src/com/samples/oop/human_builder.py">human_builder.py</a>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">HumanBuilder</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">():</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">gender</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gender</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__gender</span> <span class="o">=</span> <span class="n">gender</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">physic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">physic</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__physic</span> <span class="o">=</span> <span class="n">physic</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">financial_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">financial_status</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__financial_status</span> <span class="o">=</span> <span class="n">financial_status</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">occupation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">occupation</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__occupation</span> <span class="o">=</span> <span class="n">occupation</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">iq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iq</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__iq</span> <span class="o">=</span> <span class="n">iq</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">hobbies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hobbies</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__hobbies</span> <span class="o">=</span> <span class="n">hobbies</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">education</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">education</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__education</span> <span class="o">=</span> <span class="n">education</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">contact_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contact_number</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__contact_number</span> <span class="o">=</span> <span class="n">contact_number</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identity</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__identity</span> <span class="o">=</span> <span class="n">identity</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">body_mark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body_mark</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__body_mark</span> <span class="o">=</span> <span class="n">body_mark</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">signature_scans</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature_scans</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__signature_scans</span> <span class="o">=</span> <span class="n">signature_scans</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">date_of_birth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date_of_birth</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__date_of_birth</span> <span class="o">=</span> <span class="n">date_of_birth</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">()</span>
        <span class="n">human</span> <span class="o">=</span> <span class="n">human</span><span class="p">(</span><span class="n">gender</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__gender</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__name</span><span class="p">,</span> <span class="n">physic</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__physic</span><span class="p">,</span>
        <span class="n">financial_status</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">financial_status</span><span class="p">,</span>
        <span class="n">occupation</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__occupation</span><span class="p">,</span> <span class="n">iq</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">iq</span><span class="p">,</span>
        <span class="n">hobbies</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__hobbies</span><span class="p">,</span>
        <span class="n">education</span><span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__education</span><span class="p">,</span>
        <span class="n">contact_number</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__contact_number</span><span class="p">,</span>
        <span class="n">Id</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__id</span><span class="p">,</span>
        <span class="n">body_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__body_mark</span><span class="p">,</span>
        <span class="n">signature_scans</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__signature_scans</span><span class="p">,</span>
        <span class="n">date_of_birth</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">__date_of_birth</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">human</span>
</code></pre></div></div>
<p>As you may have noticed that the HumanBuilder is not as per the PEP8â€˜s suggestions but our Human object is. So the purpose of builder is accomplished without disturbing the PEP8 with respect to our object Human.
Let us go ahead and create some humans.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">tony_stark_builder</span> <span class="o">=</span> <span class="n">HumanBuilder</span><span class="p">()</span>
    <span class="n">tony_stark_builder</span><span class="p">.</span><span class="n">name</span><span class="p">(</span><span class="s">'Tony Stark'</span><span class="p">)</span>
                <span class="p">.</span><span class="n">gender</span><span class="p">(</span><span class="s">'Male'</span><span class="p">)</span>
                <span class="p">.</span>
                <span class="p">.</span>
                <span class="p">.</span>
    <span class="n">howard_stark</span> <span class="o">=</span> <span class="n">howard_stark_builder</span><span class="p">()</span>
    <span class="n">howard_stark</span><span class="p">.</span><span class="n">name</span><span class="p">(</span><span class="s">'Howard Stark'</span><span class="p">)</span>
                <span class="p">.</span><span class="n">gender</span><span class="p">(</span><span class="s">'Male'</span><span class="p">)</span>
                <span class="p">.</span><span class="n">occupation</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>
    <span class="n">maria_stark</span> <span class="o">=</span> <span class="n">Maria_Stark_Builder</span><span class="p">()</span>
    <span class="n">maria_stark_builder</span><span class="p">.</span><span class="n">name</span><span class="p">(</span><span class="s">'Maria Stark'</span><span class="p">)</span>
                       <span class="p">.</span><span class="n">gender</span><span class="p">(</span><span class="s">'Female'</span><span class="p">)</span>
</code></pre></div></div>

<p>As you may have notice there is one major thing lacking here and that is the relations between the humans. Accepting the facts provided by the Science Humans are born from Humans. So how shall we present the relationships. How to answer this question. As we all know the word relation means association with some one. So it obviously requires atleast two same subjects. In our case it is humans. In every relation both associates has some role to play. So we must know the role of the human in that relation. Let us assume all roles in binary relation are left to right. For example to represent relation below could be the code found in <a href="/src/com/samples/oop/relation/relation.py">relation.py</a>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Relation</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">left_entity</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">right_entity</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">left_entity</span> <span class="o">=</span> <span class="n">left_entity</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">right_entity</span> <span class="o">=</span> <span class="n">right_entity</span>

    <span class="k">def</span> <span class="nf">relation</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">"left_entity"</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">left_entity</span><span class="p">,</span> <span class="s">"right_entity"</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">right_entity</span><span class="p">}</span>
</code></pre></div></div>
<p>For Husband Wife relation. It is <a href="/src/com/samples/oop/relation/husband_wife.py">here</a></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">HusbandWife</span><span class="p">(</span><span class="n">Relation</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">husband</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">wife</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">husband</span><span class="p">,</span> <span class="s">"Human"</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wife</span><span class="p">,</span> <span class="s">"Human"</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">left_entity</span><span class="o">=</span><span class="n">husband</span><span class="p">,</span> <span class="n">right_entity</span><span class="o">=</span><span class="n">wife</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"husband and wife must belong to same entity type"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">husband</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">left_entity</span>

    <span class="k">def</span> <span class="nf">wife</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">wife</span>

    <span class="k">def</span> <span class="nf">relation</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">"husband"</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">left_entity</span><span class="p">,</span> <span class="s">"wife"</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">right_entity</span><span class="p">}</span>
</code></pre></div></div>
<p>So using our relationship we can use it for our above human example as follows:</p>

<blockquote>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stark_husband_wife = HusbandWife(howard_stark, maria_stark)
type(stark_husband_wife)
&lt;class 'oop.relation.husband_wife.HusbandWife'&gt;
</code></pre></div>  </div>
</blockquote>
:ET